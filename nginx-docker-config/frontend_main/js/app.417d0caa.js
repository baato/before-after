(function(a){function e(e){for(var t,s,o=e[0],l=e[1],c=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(t in l)Object.prototype.hasOwnProperty.call(l,t)&&(a[t]=l[t]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var a,e=0;e<r.length;e++){for(var n=r[e],t=!0,o=1;o<n.length;o++){var l=n[o];0!==i[l]&&(t=!1)}t&&(r.splice(e--,1),a=s(s.s=n[0]))}return a}var t={},i={app:0},r=[];function s(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return a[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=a,s.c=t,s.d=function(a,e,n){s.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:n})},s.r=function(a){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,e){if(1&e&&(a=s(a)),8&e)return a;if(4&e&&"object"===typeof a&&a&&a.__esModule)return a;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var t in a)s.d(n,t,function(e){return a[e]}.bind(null,t));return n},s.n=function(a){var e=a&&a.__esModule?function(){return a["default"]}:function(){return a};return s.d(e,"a",e),e},s.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(a,e,n){a.exports=n("56d7")},"1e9b":function(a){a.exports=JSON.parse('{"af":"afghanistan","ax":"Ã¥land islands","al":"albania","dz":"algeria","as":"american samoa","ad":"andorra","ao":"angola","ai":"anguilla","aq":"antarctica","ag":"antigua and barbuda","ar":"argentina","am":"armenia","aw":"aruba","au":"australia","at":"austria","az":"azerbaijan","bs":"bahamas","bh":"bahrain","bd":"bangladesh","bb":"barbados","by":"belarus","be":"belgium","bz":"belize","bj":"benin","bm":"bermuda","bt":"bhutan","bo":"bolivia","ba":"bosnia and herzegovina","bw":"botswana","bv":"bouvet island","br":"brazil","io":"british indian ocean territory","bn":"brunei darussalam","bg":"bulgaria","bf":"burkina faso","bi":"burundi","kh":"cambodia","cm":"cameroon","ca":"canada","cv":"cape verde","ky":"cayman islands","cf":"central african republic","td":"chad","cl":"chile","cn":"china","cx":"christmas island","cc":"cocos (keeling) islands","co":"colombia","km":"comoros","cg":"congo","cd":"congo, the democratic republic of the","ck":"cook islands","cr":"costa rica","ci":"cote d\\"ivoire","hr":"croatia","cu":"cuba","cy":"cyprus","cz":"czech republic","dk":"denmark","dj":"djibouti","dm":"dominica","do":"dominican republic","ec":"ecuador","eg":"egypt","sv":"el salvador","gq":"equatorial guinea","er":"eritrea","ee":"estonia","et":"ethiopia","fk":"falkland islands (malvinas)","fo":"faroe islands","fj":"fiji","fi":"finland","fr":"france","gf":"french guiana","pf":"french polynesia","tf":"french southern territories","ga":"gabon","gm":"gambia","ge":"georgia","de":"germany","gh":"ghana","gi":"gibraltar","gr":"greece","gl":"greenland","gd":"grenada","gp":"guadeloupe","gu":"guam","gt":"guatemala","gg":"guernsey","gn":"guinea","gw":"guinea-bissau","gy":"guyana","ht":"haiti","hm":"heard island and mcdonald islands","va":"holy see (vatican city state)","hn":"honduras","hk":"hong kong","hu":"hungary","is":"iceland","in":"india","id":"indonesia","ir":"iran, islamic republic of","iq":"iraq","ie":"ireland","im":"isle of man","il":"israel","it":"italy","jm":"jamaica","jp":"japan","je":"jersey","jo":"jordan","kz":"kazakhstan","ke":"kenya","ki":"kiribati","kp":"korea, democratic people\\"s republic of","kr":"korea, republic of","kw":"kuwait","kg":"kyrgyzstan","la":"lao people\\"s democratic republic","lv":"latvia","lb":"lebanon","ls":"lesotho","lr":"liberia","ly":"libyan arab jamahiriya","li":"liechtenstein","lt":"lithuania","lu":"luxembourg","mo":"macao","mk":"macedonia, the former yugoslav republic of","mg":"madagascar","mw":"malawi","my":"malaysia","mv":"maldives","ml":"mali","mt":"malta","mh":"marshall islands","mq":"martinique","mr":"mauritania","mu":"mauritius","yt":"mayotte","mx":"mexico","fm":"micronesia, federated states of","md":"moldova, republic of","mc":"monaco","mn":"mongolia","ms":"montserrat","ma":"morocco","mz":"mozambique","mm":"myanmar","na":"namibia","nr":"nauru","np":"nepal","nl":"netherlands","an":"netherlands antilles","nc":"new caledonia","nz":"new zealand","ni":"nicaragua","ne":"niger","ng":"nigeria","nu":"niue","nf":"norfolk island","mp":"northern mariana islands","no":"norway","om":"oman","pk":"pakistan","pw":"palau","ps":"palestinian territory, occupied","pa":"panama","pg":"papua new guinea","py":"paraguay","pe":"peru","ph":"philippines","pn":"pitcairn","pl":"poland","pt":"portugal","pr":"puerto rico","qa":"qatar","re":"reunion","ro":"romania","ru":"russian federation","rw":"rwanda","sh":"saint helena","kn":"saint kitts and nevis","lc":"saint lucia","pm":"saint pierre and miquelon","vc":"saint vincent and the grenadines","ws":"samoa","sm":"san marino","st":"sao tome and principe","sa":"saudi arabia","sn":"senegal","rs":"serbia","me":"montenegro","sc":"seychelles","sl":"sierra leone","sg":"singapore","sk":"slovakia","si":"slovenia","sb":"solomon islands","so":"somalia","za":"south africa","gs":"south georgia and the south sandwich islands","es":"spain","lk":"sri lanka","sd":"sudan","sr":"suriname","sj":"svalbard and jan mayen","sz":"swaziland","se":"sweden","ch":"switzerland","sy":"syrian arab republic","tw":"taiwan, province of china","tj":"tajikistan","tz":"tanzania, united republic of","th":"thailand","tl":"timor-leste","tg":"togo","tk":"tokelau","to":"tonga","tt":"trinidad and tobago","tn":"tunisia","tr":"turkey","tm":"turkmenistan","tc":"turks and caicos islands","tv":"tuvalu","ug":"uganda","ua":"ukraine","ae":"united arab emirates","gb":"united kingdom","us":"united states","um":"united states minor outlying islands","uy":"uruguay","uz":"uzbekistan","vu":"vanuatu","ve":"venezuela","vn":"viet nam","vg":"virgin islands, british","vi":"virgin islands, u.s.","wf":"wallis and futuna","eh":"western sahara","ye":"yemen","zm":"zambia","zw":"zimbabwe"}')},"56d7":function(a,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var t=n("2b0e"),i=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"#2c3e50",dark:""}},[n("img",{staticStyle:{padding:"5px"},attrs:{src:"logo.png"}}),a._v(" Provision before-after map with ease "),n("v-spacer"),n("v-switch",{staticClass:"text-right",attrs:{inset:"","prepend-icon":"mdi-theme-light-dark",align:"right"},model:{value:a.$vuetify.theme.dark,callback:function(e){a.$set(a.$vuetify.theme,"dark",e)},expression:"$vuetify.theme.dark"}})],1),n("v-main",[n("HelloWorld")],1),n("v-footer",{attrs:{padless:""}},[n("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[n("strong",[a._v("Powered by "),n("a",{attrs:{href:"https://baato.io",target:"_blank"}},[a._v("baato.io")])])])],1)],1)},r=[],s=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("v-container",[a.successfullyProvisioned?n("SuccessfullyProvisioned",{attrs:{instanceName:a.instance.uuid}}):a._e(),n("Loader",{attrs:{showLoading:a.showLoading,country:a.instance.country,progressMessage:a.provisioningStateMappings[a.provisioningState]}}),n("br"),n("v-card",{attrs:{elevation:"10"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"1"}}),n("v-col",{attrs:{cols:"12",sm:"8"}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:a.valid,callback:function(e){a.valid=e},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"12"}},[n("v-text-field",{attrs:{label:"Enter bounding box (or select using icon) for the region (eg: 84.715576,26.887167,85.168076,27.250357)",rules:a.requiredRules,required:"","append-icon":"mdi-eyedropper","prepend-icon-tooltip":"Click here to add a new User Type"},on:{blur:a.getCountryCodeFromNominatim,"click:append":a.openBboxFinder},model:{value:a.instance.bbox,callback:function(e){a.$set(a.instance,"bbox",e)},expression:"instance.bbox"}})],1)],1),a.instance.country?n("strong",{staticClass:"teal--text"},[a._v("This area is identified to be within "+a._s(a.instance.country.toUpperCase()))]):a._e(),n("v-text-field",{attrs:{label:"Enter name for the instance (eg: Pokhara)",rules:a.requiredRules,required:""},model:{value:a.instance.uuid,callback:function(e){a.$set(a.instance,"uuid",e)},expression:"instance.uuid"}}),n("v-text-field",{attrs:{label:"Enter before-year (eg: 2015)",rules:a.requiredRules,required:""},model:{value:a.instance.beforeYear,callback:function(e){a.$set(a.instance,"beforeYear",e)},expression:"instance.beforeYear"}}),n("v-select",{attrs:{label:"Select map style",items:a.styles,rules:a.requiredRules,required:""},model:{value:a.instance.style,callback:function(e){a.$set(a.instance,"style",e)},expression:"instance.style"}}),n("v-text-field",{attrs:{label:"Enter Baato access token",rules:a.requiredRules,required:""},model:{value:a.instance.baato_access_token,callback:function(e){a.$set(a.instance,"baato_access_token",e)},expression:"instance.baato_access_token"}}),n("v-btn",{staticClass:"mr-4 text-xs-center",attrs:{disabled:!a.valid,color:"#bdc3c7"},on:{click:a.validate}},[a._v(" Provision ")])],1)],1)],1)],1)],1)},o=[],l=(n("d81d"),n("ac1f"),n("1276"),n("a9e3"),n("d3b7"),n("25f0"),function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("v-dialog",{attrs:{width:"500"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline green lighten-2"},[a._v(" Instance successfully provisioned ")]),n("v-card-text",[a._v(" A new instance is successfuly provisioned at "),n("a",{attrs:{target:"_blank",href:"http://localhost:5678/provision/"+a.instanceName}},[a._v("http://localhost:5678/provision/"+a._s(a.instanceName))])]),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){a.dialog=!1}}},[a._v(" OK ")])],1)],1)],1)}),c=[],u={data:function(){return{dialog:!0}},props:{instanceName:String}},d=u,p=n("2877"),g=n("6544"),b=n.n(g),m=n("8336"),v=n("b0af"),f=n("99d9"),h=n("169a"),y=n("ce7e"),k=n("2fa4"),w=Object(p["a"])(d,l,c,!1,null,null,null),x=w.exports;b()(w,{VBtn:m["a"],VCard:v["a"],VCardActions:f["a"],VCardText:f["b"],VCardTitle:f["c"],VDialog:h["a"],VDivider:y["a"],VSpacer:k["a"]});var _=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("v-dialog",{attrs:{persistent:"",width:"400"},model:{value:a.showLoading,callback:function(e){a.showLoading=e},expression:"showLoading"}},[n("v-card",{attrs:{color:"#d35400",dark:""}},[n("v-card-text",[a.progressMessage?n("span",[a._v(a._s(a.progressMessage))]):a._e(),a.progressMessage?a._e():n("span",[a._v("Provisioning a new instance for "+a._s(a.country.toUpperCase())+" with specified bounding box")]),n("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)},z=[],j={data:function(){return{dialog:!0}},props:{country:String,showLoading:Boolean,progressMessage:String}},S=j,C=n("8e36"),V=Object(p["a"])(S,_,z,!1,null,null,null),q=V.exports;b()(V,{VCard:v["a"],VCardText:f["b"],VDialog:h["a"],VProgressLinear:C["a"]});var P=n("bc3a"),O=n.n(P),M=n("1e9b"),$={name:"HelloWorld",components:{Loader:q,SuccessfullyProvisioned:x},data:function(){return{instance:{uuid:null,year:15,beforeYear:2015,bbox:"89.569130,27.419014,89.710236,27.500658",style:null,country:null,baato_access_token:"bpk.whkzK2b4MgeI9s7l-Y9izy11aE6j5sQzd-GrkYzMpkKS"},styles:["retro","breeze"],showLoading:!1,successfullyProvisioned:!1,valid:!0,ws:null,provisioningState:null,requiredRules:[function(a){return!!a||"This field is required"}],provisioningStateMappings:{"/provisioning-scripts/prepare-provision.sh":"Preparing provision","/provisioning-scripts/download-data.sh":"Downloading OSM data","/provisioning-scripts/generate-extracts.sh":"Generating extracts for the region","/provisioning-scripts/generate-tiles.sh":"Generating tiles","/provisioning-scripts/provision.sh":"Finishing up",done:"Done"}}},created:function(){var a=this;this.ws=new WebSocket("ws://".concat(window.location.hostname,":8848/ws")),console.log(this.ws),this.ws.addEventListener("message",(function(e){a.provisioningState=e.data,"done"==a.provisioningState&&(a.showLoading=!1,a.successfullyProvisioned=!0)}))},methods:{getCountryCodeFromNominatim:function(){var a=this,e=this.getBoundingBoxCenter(this.instance.bbox);O.a.get("http://nominatim.openstreetmap.org/reverse",{params:{format:"json",lat:e.lat,lon:e.lon},timeout:6e5}).then((function(e){var n=e.data.address.country_code;a.instance.country=M[n]})).catch((function(e){a.instance.country="Invalid bounding box!",console.log(e)}))},getBoundingBoxCenter:function(a){var e=a.split(",").map((function(a){return Number(a)})),n={lat:(e[1]+e[3])/2,lon:(e[0]+e[2])/2};return n},openBboxFinder:function(){window.open("http://bboxfinder.com","_blank")},invokeSocket:function(){var a={message:"provision",uuid:this.instance.uuid,year:this.instance.year.toString(),bbox:this.instance.bbox,style:this.instance.style,country:this.instance.country,baato_access_token:this.instance.baato_access_token};console.log("signalToSendToSocket",a),this.ws.send(JSON.stringify(a))},provisionInstanceAPICall:function(){this.showLoading=!0,this.instance.year=this.instance.beforeYear.toString().substring(2),this.invokeSocket()},submitForm:function(){this.provisionInstanceAPICall()},validate:function(){var a=this.$refs.form.validate();a&&this.submitForm()}}},L=$,T=n("62ad"),B=n("a523"),E=n("4bd4"),F=n("0fd9"),N=n("b974"),A=n("8654"),I=Object(p["a"])(L,s,o,!1,null,null,null),R=I.exports;b()(I,{VBtn:m["a"],VCard:v["a"],VCol:T["a"],VContainer:B["a"],VForm:E["a"],VRow:F["a"],VSelect:N["a"],VTextField:A["a"]});var Y={name:"App",components:{HelloWorld:R},data:function(){return{}}},D=Y,J=n("7496"),W=n("40dc"),G=n("553a"),H=n("f6c4"),K=n("b73d"),U=Object(p["a"])(D,i,r,!1,null,null,null),Q=U.exports;b()(U,{VApp:J["a"],VAppBar:W["a"],VCol:T["a"],VFooter:G["a"],VMain:H["a"],VSpacer:k["a"],VSwitch:K["a"]});var X=n("f309");t["a"].use(X["a"]);var Z=new X["a"]({theme:{dark:!1}});t["a"].config.productionTip=!1,new t["a"]({vuetify:Z,render:function(a){return a(Q)}}).$mount("#app")}});
//# sourceMappingURL=app.417d0caa.js.map